<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Kotlin in Action 2 | windymiao | code for fun</title>

  
  <meta name="author" content="windymiao">
  

  
  <meta name="description" content="1.2.2 静态类型正如 Java 一样，Kotlin 是一个静态类型的编程语言。意味着，在编译时程序中的每个表达式的类型都是已知的，编译器可以验证您试图访问的方法和字段是否存在于所使用的对象上。这与动态类型的编程语言形成对比，以在 JVM 上为代表的如 Groovy 和 JRuby。这些语言允许你定义能够存储或返回任意类型的数据的变量和函数，并且在运行时能解析方法和字段的引用。这使得创建数据结构的代码更短，灵活性更高。但也存在缺点，如果名字拼写错误，在编译的时候不能被检测出来，从而人导致运行错误。">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="Kotlin in Action 2"/>

  <meta property="og:site_name" content="windymiao"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="windymiao" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">windymiao</a>
    </h1>
    <p class="site-description">code for fun</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
        <li><a href="/categories">分类</a></li>
      
        <li><a href="/tags">标签</a></li>
      
        <li><a href="/about">关于</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>Kotlin in Action 2</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/08/08/一/Kotlin in Action/Kotlin in Action 1/Kotlin in Action -2/" rel="bookmark">
        <time class="entry-date published" datetime="2017-08-08T09:03:27.000Z">
          2017-08-08
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h4 id="1-2-2-静态类型"><a href="#1-2-2-静态类型" class="headerlink" title="1.2.2 静态类型"></a>1.2.2 静态类型</h4><p>正如 Java 一样，Kotlin 是一个静态类型的编程语言。意味着，在编译时程序中的每个表达式的类型都是已知的，编译器可以验证您试图访问的方法和字段是否存在于所使用的对象上。这与动态类型的编程语言形成对比，以在 JVM 上为代表的如 Groovy 和 JRuby。这些语言允许你定义能够存储或返回任意类型的数据的变量和函数，并且在运行时能解析方法和字段的引用。这使得创建数据结构的代码更短，灵活性更高。但也存在缺点，如果名字拼写错误，在编译的时候不能被检测出来，从而人导致运行错误。<span id="more"></span></p>
<p>另一方面，与 Java 相比，Kotlin 没有要求在源代码中为每一个变量指定明确的类型。大多数的情况下，变量的类型可以根据上下文自动匹配，允许你省略类型的声明。下面是一个最简单的例子：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> x = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>你在声明一个变量，因为它在初始化时赋的值是一个整型类型的数据，Kotlin 会自动匹配它的类型的 Int。编译器通过上下文来决定类型的能力叫做 <em>类型推断</em> 。</p>
<p>以下是静态类型的一些好处：</p>
<ul>
<li>性能  - 调用方法速度比较快，因为不需要在运行时计算需要调用哪种方法。</li>
<li>可靠性 - 编译器会验证程序的是否正确，所以在运行时几乎不会有崩溃的可能。</li>
<li>可维护性 - 使用不熟悉的代码更容易，因为您可以看到代码正在使用什么样的对象。</li>
<li>工具支持 - 静态类型可实现可靠的重构，精确的代码完成和其他 IDE 功能。</li>
</ul>
<p>因为 Kotlin 支持类型推断，与静态类型相关联的大部分额外的冗长度消失，因为你不需要声明明确的类型。</p>
<p>如果你看 Kotlin 的类型系统的细节，你会发现许多相似的概念。类、接口、泛型的使用在某种程度上与 Java 非常相似，因此大多数的 Java 知识都应该很容易转到 Kotlin，即使有一些东西是新的。</p>
<p>其中最重要的是 Kotlin支持空类型，通过在编译时检测可能的空指针异常，可以编写更可靠的程序。在本章的后面会返回到空类型，而且在第六章会详细地讨论空类型。</p>
<p>Kotlin 类型系统中的另一个新特性是支持函数类型。让我们来看看函数式编程的主要思想，看看在 Kotlin 中它是如何支持的。</p>
<h4 id="1-2-3-函数和面向对象"><a href="#1-2-3-函数和面向对象" class="headerlink" title="1.2.3  函数和面向对象"></a>1.2.3  函数和面向对象</h4><p>作为 Java 开发者，毫无疑问，您熟悉面向对象编程的核心概念，但对于函数编程来说可能是新知识。以下是函数编程的关键概念：</p>
<ul>
<li>第一类函数 - 把函数当成一个值。可以把它们存储在一个变量中，当作一个参数传递，或者从其他的函数返回。</li>
<li>不变性 - 使用不变的对象，以保证当它们创建之后它们的状态不会改变。</li>
<li>无副作用 - 您使用纯函数返回相同的结果，给出相同的输入，并且不修改其他对象的状态或与外部世界交互。</li>
</ul>
<p>用函数风格写代码会有什么好处呢？首先，简洁。函数式代码比命令式代码更简洁更优雅，因为把函数作为一个值，可以提供更多的抽象的能力，在代码中能够避免重复。想象一下有两个实现了相似任务（例如，查找集合中匹配的元素）但细节（如何检测匹配的元素）不同的相似代码片断。你可以很容易地把相似的逻辑部分提取到一个函数中，把不同的部分作为参数传递。这些参数本身就是函数，你也可以用一个叫做 <em>lambda expressions</em> 的简单语法来表示一个匿名函数。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">findAlice</span><span class="params">()</span></span> = findPerson&#123; it.name == <span class="string">&quot;Alice&quot;</span>&#125;   <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">findBob</span><span class="params">()</span></span> findPerson&#123; it.name == <span class="string">&quot;Bob&quot;</span>&#125;         <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>​       1.findPerosn() 包含了找一个人的简单的逻辑</p>
<p>​       2.花括号中的代码块表示需要查找的人。</p>
<p>函数编程的第二个好处是多线程安全。多线程程序中错误的最大来源之一是在没有适当同步的情况下对来自多个线程的相同数据进行修改。如果使用不可变数据结构和纯函数，你可以确信这种不安全的修改不会发生，你不需要拿出复杂的同步方案。</p>
<p>最后，函数编程意味着更容易测试。没有副作用的代码通常更容易测试。可以单独地测试功能，而不需要大量的安装代码来构建它们所依赖的整个环境。一般来说，函数编程可以使用在任何的程序语言，包括 Java，它的许多地方被认为是好的编程风格。但并不中所有的语言都会提供必要的语法和支持的库来高效的使用函数编程。例如，Java 8 之前的Java版本大多缺少这种支持。Kotlin有一个丰富的功能集，从一开始支持函数式编程。包括以下内容：</p>
<ul>
<li>函数编程 - 允许函数接收其他以参数形式传递的函数，或返回其他函数。</li>
<li>Lambda expressions - 用最小模板通过代码块。</li>
<li>数据类 - 为创建固定值的对象提供一个简洁的语法。</li>
<li>对于函数编程，在标准库中有大量的能使用对象和集合的 API 集合，</li>
</ul>
<p>Kotlin 允许在程序中使用函数编程，但并不强制使用。当你需要的时候可以使用易变的数据，写一个有副作用的函数，不用跳出任何额外的环。当然在 Java 中使用基于接口和类层级的框架也是容易的。用 Kotlin 写代码时，可以结合面向对象和功能方法，并使用最适合你解决问题的工具。</p>
<p>​		<br>​	</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    

    </div>

    
  </div>
</article>

  









    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2022 windymiao
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>